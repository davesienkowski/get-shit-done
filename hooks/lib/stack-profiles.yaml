# Stack Profiles Configuration for GSD Analyze-Codebase
# Version: 1.0.0
# Purpose: Multi-stack support for semantic analysis, export detection, and naming conventions
# Usage: Referenced by .planning/intel/analyze-codebase for stack-aware semantic indexing

# =============================================================================
# JAVASCRIPT / TYPESCRIPT ECOSYSTEM
# =============================================================================

javascript:
  display_name: "JavaScript"
  marker_files: ["package.json", "yarn.lock", "npm-shrinkwrap.json"]
  globs: ["**/*.js", "**/*.mjs", "**/*.cjs"]
  excludes: ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**"]
  export_patterns:
    - pattern: 'export\s+(?:default\s+)?(?:async\s+)?function\s+(\w+)'
      type: function
      scope: public
    - pattern: 'export\s+(?:default\s+)?class\s+(\w+)'
      type: class
      scope: public
    - pattern: 'export\s+const\s+(\w+)\s*='
      type: constant
      scope: public
    - pattern: 'module\.exports\.(\w+)'
      type: commonjs_export
      scope: public
    - pattern: 'exports\.(\w+)\s*='
      type: commonjs_export
      scope: public
  import_patterns:
    - pattern: 'import\s+.*from\s+["\']([^"\']+)["\']'
      type: es6
    - pattern: 'require\(["\']([^"\']+)["\']\)'
      type: commonjs
    - pattern: 'import\(["\']([^"\']+)["\']\)'
      type: dynamic
  naming:
    functions: camelCase
    classes: PascalCase
    constants: SCREAMING_SNAKE_CASE
    variables: camelCase
    files: kebab-case
  directories:
    src: "Source code"
    lib: "Library code"
    tests: "Test files"
    __tests__: "Jest tests"
    spec: "Spec files"
    dist: "Distribution build"
    build: "Build output"
  frameworks:
    react:
      markers: ["**/*.jsx"]
      package_deps: ["react", "react-dom"]
      directories:
        components: "React components"
        hooks: "Custom hooks"
        pages: "Page components"
    express:
      markers: ["app.js", "server.js"]
      package_deps: ["express"]
      directories:
        routes: "Route handlers"
        middleware: "Middleware functions"
        controllers: "Controllers"

typescript:
  display_name: "TypeScript"
  marker_files: ["tsconfig.json", "package.json"]
  globs: ["**/*.ts", "**/*.tsx", "**/*.mts", "**/*.cts"]
  excludes: ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**"]
  export_patterns:
    - pattern: 'export\s+(?:default\s+)?(?:async\s+)?function\s+(\w+)'
      type: function
      scope: public
    - pattern: 'export\s+(?:default\s+)?class\s+(\w+)'
      type: class
      scope: public
    - pattern: 'export\s+(?:default\s+)?interface\s+(\w+)'
      type: interface
      scope: public
    - pattern: 'export\s+(?:default\s+)?type\s+(\w+)'
      type: type
      scope: public
    - pattern: 'export\s+(?:default\s+)?enum\s+(\w+)'
      type: enum
      scope: public
    - pattern: 'export\s+const\s+(\w+)\s*:'
      type: constant
      scope: public
  import_patterns:
    - pattern: 'import\s+.*from\s+["\']([^"\']+)["\']'
      type: es6
    - pattern: 'import\s+type\s+.*from\s+["\']([^"\']+)["\']'
      type: type_import
    - pattern: 'require\(["\']([^"\']+)["\']\)'
      type: commonjs
  naming:
    functions: camelCase
    classes: PascalCase
    interfaces: PascalCase
    types: PascalCase
    enums: PascalCase
    constants: SCREAMING_SNAKE_CASE
    variables: camelCase
    files: kebab-case
  directories:
    src: "Source code"
    lib: "Library code"
    types: "Type definitions"
    tests: "Test files"
    __tests__: "Jest tests"
    dist: "Distribution build"
  frameworks:
    react:
      markers: ["**/*.tsx"]
      package_deps: ["react", "@types/react"]
      directories:
        components: "React components"
        hooks: "Custom hooks"
    nextjs:
      markers: ["next.config.js", "next.config.ts"]
      package_deps: ["next"]
      directories:
        pages: "Next.js pages"
        app: "App router"
        api: "API routes"
    nestjs:
      markers: ["nest-cli.json"]
      package_deps: ["@nestjs/core"]
      directories:
        modules: "NestJS modules"
        controllers: "Controllers"
        services: "Services"
    angular:
      markers: ["angular.json"]
      package_deps: ["@angular/core"]
      directories:
        app: "Application code"
        services: "Services"
        components: "Components"

# =============================================================================
# PYTHON ECOSYSTEM
# =============================================================================

python:
  display_name: "Python"
  marker_files: ["requirements.txt", "setup.py", "pyproject.toml", "Pipfile"]
  globs: ["**/*.py", "**/*.pyi"]
  excludes: ["**/__pycache__/**", "**/venv/**", "**/env/**", "**/.venv/**", "**/dist/**", "**/*.egg-info/**"]
  export_patterns:
    - pattern: '^def\s+(\w+)\s*\('
      type: function
      scope: public
    - pattern: '^class\s+(\w+)'
      type: class
      scope: public
    - pattern: '^async\s+def\s+(\w+)\s*\('
      type: async_function
      scope: public
    - pattern: '^(\w+)\s*=\s*\w+\s*#.*constant'
      type: constant
      scope: public
    - pattern: '__all__\s*=\s*\[(.*?)\]'
      type: public_api
      scope: public
  import_patterns:
    - pattern: 'from\s+([\w.]+)\s+import'
      type: from_import
    - pattern: 'import\s+([\w.]+)'
      type: import
  naming:
    functions: snake_case
    classes: PascalCase
    constants: SCREAMING_SNAKE_CASE
    variables: snake_case
    modules: snake_case
    files: snake_case
  directories:
    src: "Source code"
    lib: "Library code"
    tests: "Test files"
    test: "Test files"
    docs: "Documentation"
    scripts: "Utility scripts"
  frameworks:
    django:
      markers: ["manage.py", "settings.py"]
      package_deps: ["django"]
      directories:
        models: "Django models"
        views: "Django views"
        templates: "Templates"
        migrations: "Database migrations"
    flask:
      markers: ["app.py", "wsgi.py"]
      package_deps: ["flask"]
      directories:
        routes: "Route handlers"
        blueprints: "Flask blueprints"
        templates: "Templates"
    fastapi:
      markers: ["main.py"]
      package_deps: ["fastapi"]
      directories:
        routers: "API routers"
        models: "Pydantic models"
        schemas: "Schemas"

# =============================================================================
# .NET ECOSYSTEM
# =============================================================================

csharp:
  display_name: "C#"
  marker_files: ["*.csproj", "*.sln", "global.json"]
  globs: ["**/*.cs", "**/*.csx"]
  excludes: ["**/bin/**", "**/obj/**", "**/packages/**", "**/.vs/**"]
  export_patterns:
    - pattern: 'public\s+(?:static\s+)?(?:async\s+)?class\s+(\w+)'
      type: class
      scope: public
    - pattern: 'public\s+interface\s+(\w+)'
      type: interface
      scope: public
    - pattern: 'public\s+enum\s+(\w+)'
      type: enum
      scope: public
    - pattern: 'public\s+(?:static\s+)?(?:async\s+)?[\w<>]+\s+(\w+)\s*\('
      type: method
      scope: public
    - pattern: 'public\s+(?:static\s+)?(?:readonly\s+)?[\w<>]+\s+(\w+)\s*[{;]'
      type: property
      scope: public
  import_patterns:
    - pattern: 'using\s+([\w.]+);'
      type: using
    - pattern: 'using\s+(\w+)\s*='
      type: using_alias
  naming:
    classes: PascalCase
    interfaces: IPascalCase
    methods: PascalCase
    properties: PascalCase
    fields: _camelCase
    constants: PascalCase
    variables: camelCase
    files: PascalCase
  directories:
    Controllers: "MVC/API Controllers"
    Models: "Data models"
    Services: "Business logic services"
    Data: "Data access layer"
    Tests: "Test projects"
    Views: "Razor views"
    Pages: "Razor pages"
    Components: "Blazor components"
    Shared: "Shared components"
    wwwroot: "Static web files"
  frameworks:
    aspnetcore:
      markers: ["Startup.cs", "Program.cs"]
      package_deps: ["Microsoft.AspNetCore"]
      directories:
        Controllers: "API/MVC controllers"
        Middleware: "Middleware components"
    blazor:
      markers: ["**/*.razor"]
      package_deps: ["Microsoft.AspNetCore.Components"]
      directories:
        Pages: "Blazor pages"
        Components: "Blazor components"
        Shared: "Shared components"
    entityframework:
      markers: ["*DbContext.cs"]
      package_deps: ["Microsoft.EntityFrameworkCore"]
      directories:
        Migrations: "EF migrations"
        Data: "DbContext and repositories"

fsharp:
  display_name: "F#"
  marker_files: ["*.fsproj", "*.sln"]
  globs: ["**/*.fs", "**/*.fsi", "**/*.fsx"]
  excludes: ["**/bin/**", "**/obj/**", "**/packages/**"]
  export_patterns:
    - pattern: '(?:^|\s)let\s+(\w+)'
      type: function
      scope: public
    - pattern: '(?:^|\s)type\s+(\w+)'
      type: type
      scope: public
    - pattern: '(?:^|\s)module\s+(\w+)'
      type: module
      scope: public
  import_patterns:
    - pattern: 'open\s+([\w.]+)'
      type: open
  naming:
    functions: camelCase
    types: PascalCase
    modules: PascalCase
    values: camelCase
    files: PascalCase
  directories:
    src: "Source code"
    tests: "Test files"
    scripts: "F# scripts"

# =============================================================================
# POWERSHELL
# =============================================================================

powershell:
  display_name: "PowerShell"
  marker_files: ["*.psd1", "*.psm1"]
  globs: ["**/*.ps1", "**/*.psm1", "**/*.psd1"]
  excludes: ["**/Modules/**", "**/.git/**"]
  export_patterns:
    - pattern: 'function\s+([\w-]+)'
      type: function
      scope: public
    - pattern: 'Export-ModuleMember\s+-Function\s+([\w-,\s]+)'
      type: exported_function
      scope: public
    - pattern: 'FunctionsToExport\s*=\s*@\((.*?)\)'
      type: manifest_export
      scope: public
  import_patterns:
    - pattern: 'Import-Module\s+([\w.-]+)'
      type: module_import
    - pattern: '\.\s+["\']([^"\']+\.ps1)["\']'
      type: dot_source
  naming:
    functions: Verb-PascalCase
    variables: camelCase
    parameters: PascalCase
    constants: SCREAMING_SNAKE_CASE
    files: Verb-PascalCase
  directories:
    Public: "Exported functions"
    Private: "Internal functions"
    Classes: "PowerShell classes"
    Config: "Configuration files"
    Resources: "Resource files"
    Tests: "Pester tests"
    lib: "External libraries"
  frameworks:
    pester:
      markers: ["**/*.Tests.ps1"]
      package_deps: ["Pester"]
      directories:
        Tests: "Pester test files"
        Unit: "Unit tests"
        Integration: "Integration tests"

